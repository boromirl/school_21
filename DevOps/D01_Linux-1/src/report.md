
## Part 1. Установка ОС

* С официального сайта скачан образ Ubuntu 20.04.2 Server LTS без графического интерфейса.
* С помощью VirtualBox, ОС была установлена на виртуальную машину.
* Проверка версии установленной ОС: \
![проверка версии установленной ОС](images/1_1.png)

## Part 2. Создание пользователя

* Создание нового пользователя `new-user`: \
![Создание нового пользователя new-user](images/2_1.png)
* Добавление нового пользователя в группу `adm`: \
![Добавление нового пользователя в группу adm](images/2_2.png)
* Вывод комманды `cat /etc/passwd` (`new-user` - последняя строка): \
![Вывод комманды cat /etc/passwd](images/2_3.png)

## Part 3. Настройка сети ОС

* Изменение имени компьютера на `user-1`: \
![Изменение имени компьютера](images/3_1.png)
---
* Изменение временной зоны на `Новосибирск`: \
![Изменение часового пояса](images/3_2.png)
---
* Список сетевых интерфейсов: \
![Список сетевых интерфейсов](images/3_3.png)
- >Интерфейс lo (loopback, локальная петля) - специальный сетевой интерфейс, который присутствует на любом компьютере и сервере. Он используется для отладки сетевых программ и запуска серверных приложений на локальной машине.
---
* IP адрес устройства: \
![ip адрес устройства](images/3_4.png)
- >DHCP расшифровывается как Dynamic Host Configuration Protocol — протокол динамической настройки узла. DHCP — протокол прикладного уровня модели TCP/IP, служит для назначения IP-адреса клиенту.
---
* Внешний ip адрес шлюза: \
![Внешний ip адрес шлюза](images/3_5.png)
* Внутренний ip адрес шлюза: \
![Внутренний ip адрес шлюза](images/3_6.png)
---
* Изменим файл конфигурации сети (`/etc/netplan/00-installer-config.yaml`): \
![Изменение файла конфишурации сети](images/3_7.png)
* Применим изменения, использовав команду:
    ```
    sudo netplan apply
    ```
* Проверка после перезагрузки: \
![Проверка после перезагрузки](images/3_8.png)
* Пропингуем `1.1.1.1`, `8.8.8.8` и `ya.ru`: \
![Проверочные пинги](images/3_9.png)

## Part 4. Обновление ОС

* Для обновления списка пакетов воспользуемся командой:
    ```
    sudo apt update
    ```
    ![alt text](images/4_1.png)

* Обновим пакеты до последней версии командой:
    ```
    sudo apt full-upgrade
    ```
* После этого проверим наличие обновлений (отсутствуют): \
![alt text](images/4_2.png)

## Part 5. Использование команды sudo

* Разрешим новому пользователю выполнять команды `sudo`, добавив его в группу sudo командой:
    ```
    sudo usermod -aG sudo new-user
    ```
* Затем проверим добавление `new-user` в группу командой:
    ```
    groups new-user
    ```
    ![alt text](images/5_1.png)
- > Sudo (substitute user and do, т.е. подменить пользователя и выполнить) - это утилита для операционных систем семейства Linux, позволяющая пользователю запускать программы с привилегиями другой учётной записи, как правило, суперпользователя. Подразумевается, что мы подменяем пользователя на root, давая ему право на выполнение задач.
* Перейдем на нового пользователя: \
![alt text](images/5_2.png)
* Изменим `hostname` от имени нового пользователя: \
![alt text](images/5_3.png)
* Перезагрузим сервер и проверим `hostname`: \
![alt text](images/5_4.png)

## Part 6. Установка и настройка службы времени

* Используем команду:
    ```
    timedatectl show
    ```
    ![alt text](images/6_1.png)
- > На скриншоте видно, что служба NTP активна и время синхронизируется.

## Part 7. Установка и использование текстовых редакторов

### VIM

* Содержимое файла `test_vim.txt` перед закрытием с сохранением: \
![alt text](images/7_1.png)
    * Для выхода с сохранением необходимо перейти в командный режим, нажав Esc, а затем ввести `:wq`.
* Содержимое файла `test_vim.txt` перед закрытием без сохранения: \
![alt text](images/7_2.png)
    * Для выхода без сохранения необходимо перейти в командный режим, нажав Esc, а затем ввести `:q!`.
* Проверим, что изменения не сохранились: \
![alt text](images/7_2_2.png)
* Результат поиска в `VIM`: \
![alt text](images/7_3.png)
* Замена слова: \
![alt text](images/7_4.png)

---

### NANO

* Содержимое файла `test_nano.txt` перед закрытием с сохранением: \
![alt text](images/7_5.png)
    * Для выхода с сохранением необходимо нажать сначала `ctrl + O` для сохранения изменений, а затем `ctrl + X` для выхода.
* Содержимое файла `test_nano.txt` перед закрытием без сохранения: \
![alt text](images/7_6.png)
    * Для выхода без сохранения необходимо нажать `ctrl + X`, а затем `N` для отказа от сохранения изменений.
* Проверим, что изменения не сохранились: \
![alt text](images/7_6_2.png)
* Поиск слова: \
![alt text](images/7_7.png)
* Процесс замены слова: \
![alt text](images/7_8.png)
* Результат замены слова: \
![alt text](images/7_9.png)

---

### JOE

* Установим редактор `JOE` командой:
    ```
    sudo apt install joe
    ```
* Содержимое файла `test_joe.txt` перед закрытием с сохранением: \
![alt text](images/7_10.png)
    * Для выхода с сохранением необходимо нажать сначала `ctrl + K`, а затем `X`.
* Содержимое файла `test_joe.txt` перед закрытием без сохранения: \
![alt text](images/7_11.png)
    * Для выхода без сохранения необходимо нажать `ctrl + K`, а затем `Q` для выхода и `N` для отказа от сохранения изменений.
* Проверим, что изменения не сохранились: \
![alt text](images/7_11_2.png)
* Поиск слова: \
![alt text](images/7_12.png)
* Процесс замены слова: \
![alt text](images/7_13.png)
* Результат замены слова: \
![alt text](images/7_14.png)


## Part 8. Установка и базовая настройка сервиса SSHD

* Установим службу `SSHd` командой:
    ```
    sudo apt install openssh-server
    ```
* Проверим состояние службы `SSHd`: \
![alt text](images/8_1.png)
- > На скриншоте видно, что служба активна (active, running) и стартуется автоматически при загрузке системы (loaded).
* Для перенастройки порта откроем конфигурационный файл /etc/ssh/sshd_config и изменим значение Port: \
![alt text](images/8_2.png)
* Перезапустим службу командой:
    ```
    sudo systemctl restart sshd
    ```
* Проверим состояние службы после перезагрузки: \
![alt text](images/8_3.png)
* Используем команду:
    ```
    ps aux | grep sshd
    ```
* Проверим с ее помощью наличие процесса `sshd`: \
![alt text](images/8_4.png)
    * `ps` - команда для просмотра процессов.
    * `a` - показать процессы всех пользователей.
    * `u` - ориентированный на пользователя формат, предоставляющий подробную информацию о процессах.
    * `x` - показывать процессы, которые не имеют терминала.
* Используем команду:
    ```
    netstat -tan
    ```
    ![alt text](images/8_5.png)
* Ключи netstat:
    * `t` - показать tcp порты.
    * `a` - показать все порты, и закрытые, и открытые.
    * `n` - вывод активных подключений TCP с отображением адресов и номеров портов в числовом формате без попыток определения имен.
* Столбцы netstat -tan:
    * `Proto` – используемый протокол  (в нашем случае tcp).
    * `Recv-Q` – количество байт, которые находятся в очереди на получение, ожидая обработки.
    * `Send-Q` – количество байт, которые находятся в очереди на отправку, ожидая передачи.
    * `Local address` – локальный адрес и порт нашего устройства, используемые в соединении. 0.0.0.0 в `local address` значит, что служба настроена на прослушивание на всех доступных интерфейсах нашего устройства.
    * `Foreign address` – удаленный адрес и порт, к которому установлено соединение. 0.0.0.0 в `foreign address` значит, что сервис находится в состоянии прослушивания и нет установленного соединения.
    * `State` – состояние соединения.


## Part 9. Установка и использование утилит top, htop

* Команда `top`: \
![alt text](images/9_1.png)
    * uptime - 40 минут.
    * количество пользователей - 1.
    * общая загрузка системы - 0.00, 0.02, 0.00.
    * общее количество процессов - 122.
    * загрузка cpu - 0.0 (id 100.0 значит, что 100% нигде не задействовано).
    * загрузка памяти - 185.6 из 7945.5.
* Отсортируем по используемой памяти, нажав `M`: \
![alt text](images/9_2.png)
    * Больше всего занимает процесс с PID 735.
* Отсортируем по занимаемому процессорному времени, нажав `P`: \
![alt text](images/9_3.png)
    * Больше всего занимает процесс с PID 1532.
* Команда `htop`.
* Сортировка по `PID`: \
![alt text](images/9_4.png)
* Сортировка по `PERCENT_CPU`: \
![alt text](images/9_5.png)
* Сортировка по `PERCENT_MEM`: \
![alt text](images/9_6.png)
* Сортировка по `TIME`: \
![alt text](images/9_7.png)
* Фильтрация по `sshd`: \
![alt text](images/9_8.png)
* Поиск `syslog`: \
![alt text](images/9_9.png)
* Меню добавления вывода: \
![alt text](images/9_10.png)
* Результат добавления `hostname`, `clock` и `uptime`: \
![alt text](images/9_11.png)

## Part 10. Использование утилиты fdisk

* Выполним команду:
    ```
    fdisk -l
    ```
    ![alt text](images/10_1.png)
    * Название диска - VBOX HARDDISK (/dev/sda)
    * Размер диска - 50 Гб
    * количество секторов - 104 857 600 
* Узнаем размер swap командой:
    ```
    free -h
    ```
    ![alt text](images/10_2.png)
    * swap - 4 Гб

## Part 11. Использование утилиты df

* Выполним команду `df`: \
![alt text](images/11_1.png)
    * Размер раздела ( / ) - 24 590 672
    * Размер занятого пространства - 7 185 352
    * Размер свободного пространства - 16 130 852
    * Процент использования - 31%
    * Единица измерения - Килобайт
* Выполним команду:
    ```
    df -Th
    ```
    ![alt text](images/11_2.png)
    * Размер раздела ( / ) – 24 Гб
    * Размер занятого пространства – 6.9 Гб
    * Размер свободного пространства – 16 Гб
    * Процент использования – 31%
    * Тип файловой системы – ext4.
- >Ext4 - журналируемая файловая система, используемая в ОС на ядре Linux. Основана на файловой системе Ext3, но отличается тем, что в ней представлен механизм записи файлов в непрерывные участки блоков (екстенты), уменьшающий фрагментацию и повышающий производительность. В ней есть журналирование, то есть в ней предусмотрена запись некоторых данных, позволяющих восстановить файловую систему при сбоях в работе компьютера.

## Part 12. Использование утилиты du

* Использование команды `du`: \
    ![alt text](images/12_1.png)
* Размер папки `/home` в байтах и в человекочитаемом виде (`-h`): \
![alt text](images/12_2.png)
* Размер папки `/var` в байтах и в человекочитаемом виде (`-h`): \
![alt text](images/12_3.png)
* Размер папки `/var/log` в байтах и в человекочитаемом виде (`-h`): \
![alt text](images/12_4.png)
* Размер содержимого папки `/var/log` в байтах: \
![alt text](images/12_5.png)

## Part 13. Установка и использование утилиты ncdu

* Установим пакет `ncdu` командой:
    ```
    sudo apt install ncdu
    ```
* Папка `/home`: \
![alt text](images/13_1.png)
* Папка `/var`: \
![alt text](images/13_2.png)
* Папка `/var/log`: \
![alt text](images/13_3.png)

## Part 14. Работа с системными журналами

* Файл `var/log/dmesg`: \
![alt text](images/14_1.png)
* Файл `var/log/syslog`: \
![alt text](images/14_2.png)
* Файл `var/log/auth.log` (выделен лог о последней успешной авторизации): \
![alt text](images/14_3.png)
    * Время - 17:21:53
    * Имя пользователя - boromirl
    * Метод входа в систему - LOGIN(uid=0)
* Перезапустим службу SSHd командой:
    ```
    sudo systemctl restart sshd
    ```
* Сообщение о рестарте SSHd в файле `var/log/auth.log`: \
![alt text](images/14_4.png)

## Part 15. Использование планировщика заданий CRON

* Для редактирования правил `cron` воспользуемся командой:
    ```
    crontab -e
    ```
* Выберем редактор nano и создадим новое правило, запускающее команду `uptime` через каждые 2 минуты: \
![alt text](images/15_1.png)
* Проверим работу `cron` с помощью файла `/var/log/syslog`: \
![alt text](images/15_2.png)
* Выведем на экран список текущих заданий `cron` командой:
    ```
    crontab -l
    ```
    ![alt text](images/15_3.png)
* Удалим все задания из планировщика командой:
    ```
    crontab -r
    ```
* Проверим список заданий еще раз: \   
![alt text](images/15_4.png)