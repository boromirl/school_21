#include "../s21_decimal_tests.h"

static s21_decimal input_data[] = {
    {{0x00000000, 0x00000000, 0x00000000, 0x00000000}},  // 0
    {{0x00000000, 0x00000000, 0x00000000, 0x00030000}},  // 0.000
    {{0x00000000, 0x00000000, 0x00000000, 0x000A0000}},  // 0.0000000000
    {{0x00000001, 0x00000000, 0x00000000, 0x00000000}},  // 1
    {{0x000000F3, 0x00000000, 0x00000000, 0x00020000}},  // 2.43
    {{0x000007CF, 0x00000000, 0x00000000, 0x00000000}},  // 1999
    {{0x0000000F, 0x00000014, 0x00000000, 0x800A0000}},  // -8.5899345935
    {{0x99362457, 0x0007AE79, 0x00000000, 0x00080000}},  // 21621621.21712727
    {{0x2113B8B0, 0x00000917, 0x00000000, 0x80070000}},  // -999494.3838384
    {{0x39608B53, 0x0000001C, 0x00000000, 0x00050000}},  // 1212217.12723
    {{0x000011EB, 0x00000000, 0x00000000, 0x80010000}},  // -458.7
};

static s21_decimal results[] = {
    {{0x00000000, 0x00000000, 0x00000000, 0x00000000}},  // 0
    {{0x00000000, 0x00000000, 0x00000000, 0x00000000}},  // 0
    {{0x00000000, 0x00000000, 0x00000000, 0x00000000}},  // 0
    {{0x00000001, 0x00000000, 0x00000000, 0x00000000}},  // 1
    {{0x00000002, 0x00000000, 0x00000000, 0x00000000}},  // 2
    {{0x000007CF, 0x00000000, 0x00000000, 0x00000000}},  // 1999
    {{0x00000009, 0x00000000, 0x00000000, 0x80000000}},  // -9
    {{0x0149EB75, 0x00000000, 0x00000000, 0x00000000}},  // 21621621
    {{0x000F4047, 0x00000000, 0x00000000, 0x80000000}},  // -999495
    {{0x00127F39, 0x00000000, 0x00000000, 0x00000000}},  // 1212217
    {{0x000001CB, 0x00000000, 0x00000000, 0x80000000}},  // -459
};

START_TEST(test) {
  s21_decimal temp;
  for (size_t i = 0; i < sizeof(input_data) / sizeof(s21_decimal); ++i) {
    s21_floor(input_data[i], &temp);
    int ret = s21_is_equal(temp, results[i]);
    ck_assert_int_eq(ret, 1);
  }
}
END_TEST

Suite *suite_floor(void) {
  Suite *suite = suite_create(MAGENTA "[s21_floor]" RESET);
  TCase *tcase_core = tcase_create(RED "s21_floor_tc" RESET);

  if (suite != NULL && tcase_core != NULL) {
    tcase_add_test(tcase_core, test);
    suite_add_tcase(suite, tcase_core);
  }
  return suite;
}
