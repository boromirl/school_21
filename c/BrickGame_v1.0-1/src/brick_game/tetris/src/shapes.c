#include "../include/tetris_backend.h"

static const int shapes[7][4][4][2] = {
    // T shape
    {/*
          #
         ###
     */
     {{0, 1}, {1, 1}, {1, 0}, {1, 2}},
     /*
          #
          ##
          #
     */
     {{0, 1}, {1, 1}, {1, 2}, {2, 1}},
     /*
         ###
          #
     */
     {{1, 0}, {1, 1}, {1, 2}, {2, 1}},
     /*
          #
         ##
          #
     */
     {{0, 1}, {1, 1}, {1, 0}, {2, 1}}},
    // Line (крутится вокруг координаты (1, 1) )
    {/*
        *
         ####
     */
     {{1, 0}, {1, 1}, {1, 2}, {1, 3}},
     /*
        * #
          #
          #
          #
     */
     {{0, 1}, {1, 1}, {2, 1}, {3, 1}},
     /*
        *
        ####

     */
     {{1, -1}, {1, 0}, {1, 1}, {1, 2}},
     /*
          #
        * #
          #
          #
     */
     {{-1, 1}, {0, 1}, {1, 1}, {2, 1}}},
    // Block (везде одинаковый квадрат)
    {/*
        *##
         ##
     */
     {{0, 0}, {0, 1}, {1, 0}, {1, 1}},
     /*
        *##
         ##
     */
     {{0, 0}, {0, 1}, {1, 0}, {1, 1}},
     /*
        *##
         ##
     */
     {{0, 0}, {0, 1}, {1, 0}, {1, 1}},
     /*
        *##
         ##
     */
     {{0, 0}, {0, 1}, {1, 0}, {1, 1}}},
    // S shape
    {/*
        * ##
         ##
     */
     {{0, 1}, {0, 2}, {1, 0}, {1, 1}},
     /*
        * #
          ##
           #
     */
     {{0, 1}, {1, 1}, {1, 2}, {2, 2}},
     /*
        *
          ##
         ##
     */
     {{1, 1}, {1, 2}, {2, 0}, {2, 1}},
     /*
        *#
         ##
          #
     */
     {{0, 0}, {1, 0}, {1, 1}, {2, 1}}},
    // Z shape
    {/*
        *##
          ##
     */
     {{0, 0}, {0, 1}, {1, 1}, {1, 2}},
     /*
        *  #
          ##
          #

     */
     {{0, 2}, {1, 1}, {1, 2}, {2, 1}},
     /*
        *
         ##
          ##

     */
     {{1, 0}, {1, 1}, {2, 1}, {2, 2}},
     /*
        * #
         ##
         #
     */
     {{0, 1}, {1, 0}, {1, 1}, {2, 0}}},
    // L shape
    {/*
        *  #
         ###
     */
     {{0, 2}, {1, 0}, {1, 1}, {1, 2}},
     /*
        * #
          #
          ##
     */
     {{0, 1}, {1, 1}, {2, 1}, {2, 2}},
     /*
        *
         ###
         #
     */
     {{1, 0}, {1, 1}, {1, 2}, {2, 0}},
     /*
        *##
          #
          #
     */
     {{0, 0}, {0, 1}, {1, 1}, {2, 1}}},
    // J shape
    {/*
        *#
         ###
     */
     {{0, 0}, {1, 0}, {1, 1}, {1, 2}},
     /*
        * ##
          #
          #
     */
     {{0, 1}, {0, 2}, {1, 1}, {2, 1}},
     /*
        *
         ###
           #
     */
     {{1, 0}, {1, 1}, {1, 2}, {2, 2}},
     /*
        * #
          #
         ##
     */
     {{0, 1}, {1, 1}, {2, 1}, {2, 0}}}};

// заполняет массив shape нужными координатами
void get_shape(int id, int orientation, int** shape) {
  for (int i = 0; i < 4; i++) {
    for (int j = 0; j < 2; j++) {
      shape[i][j] = shapes[id][orientation][i][j];
    }
  }
}

// получить матрицу 4 на 6, в которой по координатам записаны цветовые коды
// фигуры (используется для next в интерфейсе)
void get_color_matrix(int id, int orientation, int** matrix) {
  for (int row = 0; row < 4; row++) {
    for (int col = 0; col < 6; col++) {
      matrix[row][col] = 0;
    }
  }
  for (int i = 0; i < 4; i++) {
    matrix[shapes[id][orientation][i][0]][shapes[id][orientation][i][1]] =
        id + 1;
  }
}